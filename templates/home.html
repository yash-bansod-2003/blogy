{% extends "base.html" %}

{% block content %}
<main class="container">
  {% for featured_blog in featured_blogs %}
  {% if forloop.first %}
  <div class="p-4 p-md-5 mb-4 rounded text-body-emphasis bg-body-secondary">
    <div class="col-lg-6 px-0">
      <h1 class="display-4 fst-italic">
        {{ featured_blog.title }}
      </h1>
      <p class="lead my-3">
        {{ featured_blog.description }}
      </p>
      <p class="lead mb-0">
        <a href="{% url 'blog_detail' featured_blog.slug %}" class="text-body-emphasis fw-bold">Continue reading...</a>
      </p>
    </div>
  </div>
  {% endif %}
  {% endfor %}
  <div class="row mb-2">
    {% for featured_blog in featured_blogs %}
    {% if not forloop.first %}
    <div class="col-md-6">
      <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
        <div class="col p-4 d-flex flex-column position-static">
          <strong class="d-inline-block mb-2 text-primary-emphasis">
            {{ featured_blog.category.name }}
          </strong>
          <h3 class="mb-0">{{ featured_blog.title }}</h3>
          <div class="mb-1 text-body-secondary">{{featured_blog.created_at | timesince}} ago |
            {{featured_blog.author}}
          </div>
          <p class="card-text mb-auto">
            {{ featured_blog.description | truncatewords:17 }}
          </p>
          <a href="{% url 'blog_detail' featured_blog.slug %}" class="icon-link gap-1 icon-link-hover stretched-link">
            Continue reading
            <svg class="bi" aria-hidden="true">
              <use xlink:href="#chevron-right"></use>
            </svg>
          </a>
        </div>
        <div class="col-auto d-none d-lg-block">
          <img src="{{ featured_blog.featured_image.url }}" alt="Thumbnail" height="250" width="200">
        </div>
      </div>
    </div>
    {% endif %}
    {% endfor %}
  </div>
  <div class="row g-5">
    <div class="col-md-8">
      <h3 class="pb-4 mb-4 fst-italic border-bottom">From the Firehose</h3>
      {% for blog in blogs %}
      <article class="blog-post">
        <h2 class="display-5 link-body-emphasis mb-1">{{blog.title }}</h2>
        <p class="blog-post-meta">
          {{blog.created_at}} by <a href="#">{{blog.author}}</a>
        </p>
        <p>
          {{blog.description }}
        </p>
        <hr />
      </article>
      {% endfor %}
    </div>
    <div class="col-md-4">
      <div class="position-sticky">
        <div class="p-4 mb-3 bg-body-tertiary rounded">
          <h4 class="fst-italic">About</h4>
          <p class="mb-0">
            Customize this section to tell your visitors a little bit about
            your publication, writers, content, or something else entirely.
            Totally up to you.
          </p>
        </div>
        <div>
          <h4 class="fst-italic">Recent posts</h4>
          <ul class="list-unstyled">
            {% for blog in blogs %}
            <li>
              <a class="d-flex flex-column flex-lg-row gap-3 align-items-start align-items-lg-center py-3 link-body-emphasis text-decoration-none border-top"
                href="{% url 'blog_detail' blog.slug %}">
                <img aria-hidden="true" class="bd-placeholder-img" height="96" preserveAspectRatio="xMidYMid slice"
                  width="100%" src="{{ blog.featured_image.url }}" alt="Thumbnail">
                <div class="col-lg-8">
                  <h6 class="mb-0">{{ blog.title }}</h6>
                  <small class="text-body-secondary">{{blog.created_at}}</small>
                </div>
              </a>
            </li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </div>
</main>
{% endblock %}